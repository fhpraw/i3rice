#!/usr/bin/bash

# update packages
sudo pacman -Syyu

# install packages
sudo pacman -S xorg-{server,xinit,xbacklight} xf86-video-{intel,amdgpu} mesa i3-wm i3blocks xwallpaper dmenu xterm noto-fonts noto-fonts-{cjk,emoji,extra} pulseaudio-alsa pulsemixer neovim ranger w3m chromium libreoffice-fresh zathura zathura-pdf-mupdf inkscape gimp sxiv imagemagick ffmpeg cmus mpv zip unzip unrar youtube-dl wget neofetch htop scrot xclip tldr acpi tlp tp_smapi man-db ntfs-3g dosfstools arandr ;

# set touchpad
sudo cp config-touchpad /etc/X11/xorg.conf.d/30-touchpad.conf ;

# make directories
mkdir -p ~/.local/share/scripts/executable ;
mkdir -p ~/.local/share/fonts/ ;
mkdir -p ~/.config/{fontconfig,i3,i3blocks,nvim,wallpaper} ;

# install Jetbrain font
curl -LJO https://github.com/ryanoasis/nerd-fonts/releases/download/v2.1.0/JetBrainsMono.zip ;
unzip JetBrainsMono.zip -d ~/.local/share/fonts/ ;
fc-cache ;

# set execute startx automatically after login
echo "if [[ ! \$DISPLAY && \$XDG_VTNR -eq 1 ]] ; then exec startx ; fi" >> ~/.bash_profile ;

# add scripts to path
echo "export PATH=\$PATH:\$HOME/.local/share/scripts/executable" >> ~/.bashrc ;
# aliases
echo "source \$HOME/.local/share/scripts/aliases" >> ~/.bashrc ;
# global variables
echo "source \$HOME/.local/share/scripts/variables" >> ~/.bashrc ;
# set vi mode in bash
echo "set -o vi" >> ~/.bashrc ;

# load Xresources
echo "[[ -f ~/.Xresources ]] && xrdb -merge -I\$HOME ~/.Xresources" >> ~/.xinitrc ;
# load xprofile
echo "[ -f ~/.xprofile ] && . ~/.xprofile" >> ~/.xinitrc ;
# load  i3
echo "exec i3" >> ~/.xinitrc ;

# mute beeb
echo "xset -b" >> ~/.xprofile ;
# set wallpaper
echo "xwallpaper --zoom ~/.config/wallpaper/wall.jpg" >> ~/.xprofile ;

cp aliases ~/.local/share/scripts/aliases
cp variables ~/.local/share/scripts/variables

cp config-xresources ~/.Xresources ;
cp config-font ~/.config/fontconfig/fonts.conf ;

cp config-i3 ~/.config/i3/config ;
cp config-i3blocks ~/.config/i3blocks/config ;

cp config-nvim ~/.config/nvim/init.vim ;
cp wall.jpg ~/.config/wallpaper/wall.jpg ;
