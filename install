#!/usr/bin/bash

# pacstrap packages: base linux linux-firmware networkmanager grub efibootmgr neovim sudo


# ---------------------------------------------------------------
# install packages for cli mode
# ---------------------------------------------------------------
# make directories
mkdir -p ~/{Documents,Videos,Audios,Projects,Downloads}

# update and install packages
sudo pacman -Syyu --noconfirm
sudo pacman -S --noconfirm $(sed '1d' packages-list.csv | grep 1 | awk -F "," '{print $1}' | xargs)

# install vim-plug and plugins on neovim
mkdir -p ~/.config/nvim/
sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
cp config-nvim ~/.config/nvim/init.vim
nvim --headless +PlugInstall +qall

# run tlp at startup
sudo systemctl enable tlp

# ---------------------------------------------------------------
# install packages for GUI mode
# ---------------------------------------------------------------
mkdir -p ~/Pictures/{Wallpapers,Screenshots}/
mkdir -p ~/.config/{i3,i3blocks,nvim,fontconfig}/
mkdir -p ~/.local/share/fonts/

sudo pacman -S --noconfirm $(sed '1d' packages-list.csv | grep 2 | awk -F "," '{print $1}' | xargs)

curl -LJO https://github.com/ryanoasis/nerd-fonts/releases/download/v2.1.0/JetBrainsMono.zip
unzip JetBrainsMono.zip -d ~/.local/share/fonts/

cp config-font ~/.config/fontconfig/fonts.conf
cp config-i3 ~/.config/i3/config
cp config-i3blocks ~/.config/i3blocks/config
cp config-xinitrc ~/.xinitrc
cp config-xprofile ~/.xprofile
cp config-xresources ~/.Xresources
cat ~/.bashrc config-bashrc > ~/.bashrc
cat ~/.bash_profile config-bash_profile > ~/.bash_profile

cp wall.jpg ~/.config/wallpaper.jpg

sudo cp config-touchpad /etc/X11/xorg.conf.d/30-touchpad.conf

reboot
